<div class="modal-header bg-primary text-white">
    <h5 class="modal-title" id="prestamoModalLabel">Detalle del Pr√©stamo N¬∞ {{ prestamo.id }}</h5>
    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
</div>

<div class="modal-body">
    <div class="row mb-3">
        <div class="col-md-6">
            <p><strong>Empleado:</strong> {{ prestamo.empleado }}</p>
            <p><strong>Tipo de Pr√©stamo:</strong> {{ prestamo.tipo_prestamo }}</p>
            <p><strong>Fecha:</strong> {{ prestamo.fecha_prestamo|date:"d/m/Y" }}</p>
            <p><strong>Estado:</strong> 
                {% if prestamo.estado == 'PEND' %}
                <span class="badge bg-warning">Pendiente</span>
                {% elif prestamo.estado == 'PAG' %}
                <span class="badge bg-success">Pagado</span>
                {% else %}
                <span class="badge bg-danger">Anulado</span>
                {% endif %}
            </p>
        </div>
        <div class="col-md-6 text-end">
            <h4>Monto Solicitado: <span class="text-primary">${{ prestamo.monto|floatformat:2 }}</span></h4>
            <h4>Monto a Pagar: <span class="text-success">${{ prestamo.monto_pagar|floatformat:2 }}</span></h4>
            <h4>Saldo Pendiente: <span class="text-danger">${{ prestamo.saldo|floatformat:2 }}</span></h4>
        </div>
    </div>

    <hr>
    <h5>Plan de Pagos</h5>
    <table class="table table-bordered table-striped table-sm">
        <thead class="table-dark">
            <tr>
                <th>N¬∞ Cuota</th>
                <th>Vencimiento</th>
                <th>Valor Cuota</th>
                <th>Saldo Cuota</th>
            </tr>
        </thead>
        <tbody>
            {% for detalle in detalles %}
            <tr>
                <td>{{ detalle.numero_cuota }}</td>
                <td>{{ detalle.fecha_vencimiento|date:"d/m/Y" }}</td>
                <td>${{ detalle.valor_cuota|floatformat:2 }}</td>
                <td>${{ detalle.saldo_cuota|floatformat:2 }}</td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="4" class="text-center">No hay detalles de cuotas registrados.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<div class="modal-footer">
    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
    <a href="{% url 'nomina:prestamo_print' prestamo.id %}" target="_blank" class="btn btn-info">üñ®Ô∏è Imprimir</a>
</div>
